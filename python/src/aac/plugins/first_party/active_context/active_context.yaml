model:
  name: active-context
  description: active-context is an Architecture-as-Code plugin that manages the active-context from the CLI.
  behavior:
    - name: list-files
      type: command
      description: Display the files in the active context.
      output:
        - name: files
          type: string[]
          python_type: list[str]
          description: Files that are in the active context.
      acceptance:
        - scenario: Display a list of all the files in the active context.
          when:
            - The command {{active-context.list-files}} is run
          then:
            - A list of files in the active context should be displayed
    - name: remove-file
      type: command
      description: Remove a file from the active context.
      input:
        - name: file
          type: file
          python_type: str
          description: The name of the file that is being removed from the active context.
      acceptance:
        - scenario: The file is removed from the active context.
          given:
            - The file named {{active-context.remove-file.file}} is in the active context.
          when:
            - The command is run with {{active-context.remove-file.file}}.
          then:
            - The file named {{active-context.remove-file.file}} should be removed from the active context.
        - scenario: The file is not in the active context.
          given:
            - The file named {{active-context.remove-file.file}} is not in the active context.
          when:
            - The command is run with a file named {{active-context.remove-file.file}}.
          then:
            - An error message should be displayed stating that the file named {{active-context.remove-file.file}} was not in the active context.
        - scenario: The file being removed from the active context is not in the file system.
          given:
            - The file named {{active-context.add-file.file}} is not in the file system.
          when:
            - The command is run with a file named {{active-context.add-file.file}}
          then:
            - An error message should be displayed explaining that the file that was removed was not in the file system.
    - name: add-file
      type: command
      description: Add a file to the active context.
      input:
        - name: file
          type: file
          python_type: str
          description: The name of the file to add to the active context.
      acceptance:
        - scenario: The file is added to the active context.
          given:
            - The file named {{active-context.add-file.file}} is in the system.
            - The file named {{active-context.add-file.file}} is not in the active context.
          when:
            - The command is run with file named {{active-context.add-file.file}}.
          then:
            - The file named {{active-context.add-file.file}} should be added to the active context.
        - scenario: The file being added is already in the active context.
          given:
            - The file named {{active-context.add-file.file}} is in the system.
            - The file named {{active-context.add-file.file}} is in the active context.
          when:
            - The command is run with file named {{active-context.add-file.file}}.
          then:
            - An error message should be displayed explaining the file named {{active-context.add-file.file}} was already in the active context.
        - scenario: The file is not in the file system.
          given:
            - The file named {{active-context.add-file.file}} is not in the file system.
          when:
            - The command is run with file named {{active-context.add-file.file}}.
          then:
            - An error message should be displayed explaining the file named {{active-context.add-file.file}} was not in the file system.
    - name: reset-context
      type: command
      description: Comamnd to reset the active context.
      acceptance:
        - scenario: The active context is being reset
          given:
            - Files are in the active context.
          when:
            - The command {{active-context.reset-context}} is run.
          then:
            - All files in the active context should be removed.
    - name: list-definitions
      type: command
      description: List all definitions within the active context.
      output:
        - name: definitions
          type: string[]
          python_type: list[str]
          description: List of all the definitions that are in the active context.
      acceptance:
        - scenario: Display a list of all the definitions in the active context.
          when:
            - The command {{active-context.list-definitions}} is run.
          then:
            - A list of all the definitions in the active context should be displayed.
    - name: describe-definition
      type: command
      description: Describe a definition in the active context.
      input:
        - name: definition-name
          type: string
          python_type: str
          description: Definition name of a defintion within a file in the active context.
      output:
        - name: definition-structure
          type: yaml
          python_type: yaml
          description: Definition structure of a definition in the active context.
        - name: definition-source
          type: file
          python_type: str
          description: Source file of a definition in the active context.
        - name: definition-start
          type: int
          python_type: int
          description: Starting line of the definition in the active context.
      acceptance:
        - scenario: Display a description of a definition in the active context.
          given:
            - Definition named {{active-context.describe-definition.definition-name}} is in the active context.
          when:
            - The comamnd {{active-context.describe-definition}} is run.
          then:
            - A description of the definition named {{active-context.describe-definition.definition-name}} should be displayed.
    - name: import-state
      type: command
      description: Import an existing active context.
      input:

        - name: state-file
          type: file
          python_type: str
          description: Persistent state file of an existing active context.
      acceptance:
        - scenario: Import an existing active context, from a persistence state file.
          given:
            - A state file with the name of {{active-context.import-state.state-file}} exists in the file system.
            - A state file with the name of {{active-context.import-state.state-file}} is not already the present active context state file.
          when:
            - The comamnd {{active-context.import-state}} is run.
          then:
            - The state file with the name of {{active-context.import-state.state-file}} is imported into the current active context.
    - name: export-state
      type: command
      description: Export the current active context into a state JSON file.
      input:
        - name: state-file-name
          type: string
          python_type: str
          description: Name of the exported state file of the current active context.
        - name: path
          type: string
          python_type: str
          description: Path of where the exported state file should go.
      output:
        - name: state-file
          type: file
          python_type: str
          description: Persistent state file of the current active context.
      acceptance:
        - scenario: Export the current active context to a state JSON file.
          when:
            - The command {{active-context.export-state}} is run.
          then:
            - The current active context state file named {{active-context.export-state.input.state-file-name}} should be exported
            - The exported state file should be located in the {{active-context.export-state.input.path}} of the file system.
